{% extends 'questoes/base.html' %}
{% load static %}

{% block title %}Dashboard - Resumo Acad√™mico{% endblock %}

{% block extra_css %}
<style>
    body {
        background-image: linear-gradient(to top, #00C6FF, #0072FF);
        min-height: 100vh;
        margin: 0;
    }
    .main-container {
        max-width: 1100px;
        margin: 40px auto;
        background: #FFFFFF;
        border-radius: 16px;
        border: 1px solid transparent;
        background-image: linear-gradient(#FFFFFF, #FFFFFF), linear-gradient(to top, #00C6FF, #0072FF);
        background-origin: border-box;
        background-clip: padding-box, border-box;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        padding: 30px;
    }
    /* Estat√≠sticas */
    .stats-container { 
        display: flex; 
        gap: 20px; 
        justify-content: center; 
        flex-wrap: wrap; 
        margin-bottom: 40px;
    }
    .stat-card { 
        background: #FFFFFF; 
        border: 1px solid #e1e5e9; 
        border-radius: 12px; 
        padding: 20px; 
        min-width: 200px; 
        text-align: center; 
        box-shadow: 0 10px 20px rgba(0,0,0,0.06); 
    }
    .stat-number { 
        color: #0072FF; 
        font-weight: 700; 
        font-size: 2rem; 
    }
    .stat-label { 
        color: #333; 
    }
    /* Cards */
    .cards-container { 
        display: flex; 
        gap: 20px; 
        flex-wrap: wrap; 
        justify-content: center; 
        margin-bottom: 40px;
    }
    .card { 
        border-radius: 12px; 
        padding: 24px; 
        width: 300px; 
        text-align: center; 
        box-shadow: 0 10px 20px rgba(0,0,0,0.06); 
        transition: transform .2s ease, box-shadow .2s ease;
    }
    .card:hover { 
        transform: translateY(-4px); 
        box-shadow: 0 14px 30px rgba(0,114,255,0.18); 
    }
    .card-icon { 
        font-size: 2.5em; 
        margin-bottom: 15px;
        display: block;
    }
    .card-title { 
        font-size: 1.3em;
        font-weight: bold;
        margin-bottom: 10px;
    }
    .card-description { 
        margin-bottom: 20px; 
        line-height: 1.6; 
    }
    .btn { 
        display: inline-block; 
        padding: 12px 18px; 
        border-radius: 8px; 
        color: #fff; 
        border: 2px solid white;
        background: rgba(255,255,255,0.2);
        font-weight: 600; 
        text-decoration: none; 
        transition: transform .2s ease, box-shadow .2s ease; 
    }
    .btn:hover { 
        transform: translateY(-2px); 
        box-shadow: 0 8px 25px rgba(0,114,255,0.3);
        background: rgba(255,255,255,0.3);
    }
    .admin-area {
        margin-top: 50px;
    }
    .admin-area h2 {
        text-align: center;
        margin-bottom: 30px;
        color: #333;
        font-size: 2em;
    }
    .restricted-area {
        text-align: center;
        margin-top: 50px;
        padding: 40px;
        background: rgba(102, 126, 234, 0.1);
        border-radius: 16px;
    }
    .restricted-area h2 {
        color: #00C6FF;
        margin-bottom: 15px;
    }
    .restricted-area p {
        color: #666;
        font-size: 1.1em;
    }
    .restricted-area p:last-child {
        color: #888;
    }
    @media (max-width: 768px) {
        html, body { overflow-x: hidden; }
        .main-container { 
            margin: 16px auto; 
            padding: 18px; 
            max-width: calc(100% - 32px);
        }
        .stats-container { flex-direction: column; gap: 12px; }
        .stat-card { width: 100%; }
        .cards-container { flex-direction: column; gap: 16px; }
        .card { width: 100%; padding: 20px; }
        .card-icon { display: block; font-size: 1.5rem; margin-bottom: 8px; }
        .card-title { margin-bottom: 6px; }
        .card-description { font-size: .95rem; }
        .btn { width: 100%; }
    }
    @media (max-width: 480px) {
        .stat-number { font-size: 1.6rem; }
        .main-container { 
            margin: 10px auto; 
            padding: 15px; 
            max-width: calc(100% - 20px);
        }
    }
</style>
{% endblock %}

{% block content %}

<!-- Estat√≠sticas -->
<div class="stats-container">
    <div class="stat-card">
        <div class="stat-number">{{ total_assuntos }}</div>
        <div class="stat-label">Conte√∫dos</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ total_questoes }}</div>
        <div class="stat-label">Quest√µes</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ total_alternativas }}</div>
        <div class="stat-label">Alternativas</div>
    </div>
</div>

<!-- Cards de A√ß√µes -->
<div class="cards-container">
    <!-- Fazer Quest√µes -->
    <div class="card" style="background: linear-gradient(to top, #00C6FF, #0072FF); color: white;">
        <span class="card-icon">üéØ</span>
        <h3 class="card-title" style="color:#fff;">Fazer Quest√µes</h3>
        <p class="card-description" style="color:#f8f9fa;">Teste seus conhecimentos</p>
        <a href="{% url 'questoes:escolher_assunto' %}" class="btn" style="box-shadow:0 6px 16px rgba(0,114,255,0.35);">Iniciar Quest√µes</a>
    </div>

    <!-- Relatar Problema -->
    <div class="card" style="background: linear-gradient(to top, #FF6B6B, #FF8E53); color: white;">
        <span class="card-icon">üêõ</span>
        <h3 class="card-title" style="color:#fff;">Relatar Problema</h3>
        <p class="card-description" style="color:#f8f9fa;">Reporte bugs e sugest√µes</p>
        <a href="{% url 'questoes:relatar_problema' %}" class="btn" style="box-shadow:0 6px 16px rgba(255,107,107,0.35);">Relatar</a>
    </div>

    {% if user.is_staff %}
    <!-- Gerenciar Quest√µes - Apenas para Admins -->
    <div class="card" style="background: linear-gradient(to top, #00C6FF, #0072FF); color: white;">
        <span class="card-icon">üìã</span>
        <h3 class="card-title" style="color:#fff;">Gerenciar Quest√µes</h3>
        <p class="card-description" style="color:#f8f9fa;">Visualize, edite e organize todas as quest√µes do sistema de forma pr√°tica.</p>
        <a href="{% url 'questoes:gerenciar_questoes' %}" class="btn" style="box-shadow:0 6px 16px rgba(0,114,255,0.35);">Gerenciar</a>
    </div>
    {% endif %}
</div>

{% if user.is_staff %}
<!-- √Årea Administrativa -->
<div class="admin-area">
    <h2>üîß √Årea Administrativa</h2>
    <div class="cards-container">
        <div class="card" style="background: linear-gradient(to top, #00C6FF, #0072FF); color: white;">
            <span class="card-icon">üë®‚Äçüíº</span>
            <h3 class="card-title" style="color:#fff;">Dashboard Admin</h3>
            <p class="card-description" style="color:#f8f9fa;">Acesse o painel administrativo completo do sistema.</p>
            <a href="{% url 'questoes:admin_dashboard' %}" class="btn">Dashboard</a>
        </div>

        <div class="card" style="background: linear-gradient(to top, #00C6FF, #0072FF); color: white;">
            <span class="card-icon">üìù</span>
            <h3 class="card-title" style="color:#fff;">Adicionar Conte√∫do</h3>
            <p class="card-description" style="color:#f8f9fa;">Crie novos conte√∫dos para organizar as quest√µes.</p>
            <a href="{% url 'questoes:adicionar_assunto' %}" class="btn">Novo Conte√∫do</a>
        </div>

        <div class="card" style="background: linear-gradient(to top, #00C6FF, #0072FF); color: white;">
            <span class="card-icon">‚ùì</span>
            <h3 class="card-title" style="color:#fff;">Adicionar Quest√£o</h3>
            <p class="card-description" style="color:#f8f9fa;">Interface administrativa para criar quest√µes completas.</p>
            <a href="{% url 'questoes:adicionar_questao' %}" class="btn">Nova Quest√£o</a>
        </div>

        <div class="card" style="background: linear-gradient(to top, #FF6B6B, #FF8E53); color: white;">
            <span class="card-icon">üêõ</span>
            <h3 class="card-title" style="color:#fff;">Gerenciar Relat√≥rios</h3>
            <p class="card-description" style="color:#f8f9fa;">Visualize e responda relat√≥rios de bugs e sugest√µes.</p>
            <a href="{% url 'questoes:gerenciar_relatorios' %}" class="btn">Gerenciar</a>
        </div>
    </div>
</div>
{% else %}
<!-- √Årea Restrita -->
<div class="restricted-area">
    <h2>üîí √Årea Administrativa</h2>
    <p>√Årea restrita para administradores</p>
    <p>Fa√ßa login como administrador para acessar essas funcionalidades</p>
</div>
{% endif %}

<script>
// Cards clic√°veis
document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.card');
    cards.forEach(card => {
        const link = card.querySelector('a.btn');
        if (link) {
            card.style.cursor = 'pointer';
            card.addEventListener('click', () => {
                window.location.href = link.href;
            });
        }
    });
});
</script>

{% endblock %}




