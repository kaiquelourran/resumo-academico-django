{% extends "base.html" %}
{% load i18n %}

{% block head_title %}{% trans "Sign In" %}{% endblock %}

{% block content %}
<script>
// Redireciona automaticamente para fazer login sem mostrar página de confirmação
(function() {
    // Pega o formulário de login
    const form = document.querySelector('form');
    if (form) {
        // Submete o formulário automaticamente
        setTimeout(function() {
            form.submit();
        }, 100);
    }
})();
</script>

<div style="text-align: center; padding: 50px;">
    <h2>{% trans "Entrando com Google..." %}</h2>
    <p>{% trans "Por favor, aguarde..." %}</p>
    <div style="margin-top: 20px;">
        <div style="display: inline-block; width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #0072FF; border-radius: 50%; animation: spin 1s linear infinite;"></div>
    </div>
</div>

<style>
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
</style>

{% if form %}
<form method="post" id="social-login-form" style="display: none;">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">{% trans "Continuar" %}</button>
</form>
{% endif %}

<script>
// Se o formulário existir, submete automaticamente após 100ms
setTimeout(function() {
    const form = document.getElementById('social-login-form');
    if (form) {
        form.submit();
    }
}, 100);
</script>
{% endblock %}

